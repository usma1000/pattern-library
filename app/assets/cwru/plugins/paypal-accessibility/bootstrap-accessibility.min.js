/*! bootstrap-accessibility-plugin - v1.0.5 - 2016-02-09
* https://github.com/paypal/bootstrap-accessibility-plugin
* Copyright (c) 2016 PayPal Accessibility Team; Licensed BSD */
!function(t){"use strict";var e=function(t){return(t||"ui-id")+"-"+Math.floor(1e3*Math.random()+1)},a=function(e,a){var n,o,i,s=e.nodeName.toLowerCase();return"area"===s?(n=e.parentNode,o=n.name,e.href&&o&&"map"===n.nodeName.toLowerCase()?(i=t("img[usemap='#"+o+"']")[0],!!i&&r(i)):!1):(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s?e.href||a:a)&&r(e)},r=function(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length};t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(a){return!!t.data(a,e)}}):function(e,a,r){return!!t.data(e,r[3])},focusable:function(e){return a(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var r=t.attr(e,"tabindex"),n=isNaN(r);return(n||r>=0)&&a(e,!n)}}),t(".modal-dialog").attr({role:"document"});var n=t.fn.modal.Constructor.prototype.hide;t.fn.modal.Constructor.prototype.hide=function(){n.apply(this,arguments),t(document).off("keydown.bs.modal")};var o=t.fn.modal.Constructor.prototype.enforceFocus;t.fn.modal.Constructor.prototype.enforceFocus=function(){var e=this.$element.find(":tabbable"),a=e[e.length-1];t(document).on("keydown.bs.modal",t.proxy(function(t){!this.$element.has(t.target).length&&t.shiftKey&&9===t.keyCode&&(a.focus(),t.preventDefault())},this)),o.apply(this,arguments)};var i,s,l="[data-toggle=dropdown]",d=200,c=t(l).parent().find("ul").attr("role","menu"),u=c.find("li").attr("role","presentation");u.find("a").attr({role:"menuitem",tabIndex:"-1"}),t(l).attr({"aria-haspopup":"true","aria-expanded":"false"}),t(l).parent().on("shown.bs.dropdown",function(e){i=t(this);var a=i.find(l);a.attr("aria-expanded","true"),a.on("keydown.bs.dropdown",t.proxy(function(e){setTimeout(function(){s=t(".dropdown-menu [role=menuitem]:visible",i)[0];try{s.focus()}catch(e){}},d)},this))}).on("hidden.bs.dropdown",function(e){i=t(this);var a=i.find(l);a.attr("aria-expanded","false")}),t(document).on("focusout.dropdown.data-api",".dropdown-menu",function(e){var a=t(this),r=this;a.parent().hasClass("open")&&setTimeout(function(){t.contains(r,document.activeElement)||a.parent().find("[data-toggle=dropdown]").dropdown("toggle")},150)}).on("keydown.bs.dropdown.data-api",l+", [role=menu]",t.fn.dropdown.Constructor.prototype.keydown);var p=t(".nav-tabs, .nav-pills"),f=p.children("li"),h=p.find('[data-toggle="tab"], [data-toggle="pill"]');h&&(p.attr("role","tablist"),f.attr("role","presentation"),h.attr("role","tab")),h.each(function(a){var r=t(t(this).attr("href")),n=t(this),o=n.attr("id")||e("ui-tab");n.attr("id",o),n.parent().hasClass("active")?(n.attr({tabIndex:"0","aria-selected":"true","aria-controls":n.attr("href").substr(1)}),r.attr({role:"tabpanel",tabIndex:"0","aria-hidden":"false","aria-labelledby":o})):(n.attr({tabIndex:"-1","aria-selected":"false","aria-controls":n.attr("href").substr(1)}),r.attr({role:"tabpanel",tabIndex:"-1","aria-hidden":"true","aria-labelledby":o}))}),t.fn.tab.Constructor.prototype.keydown=function(e){var a,r,n=t(this),o=n.closest("ul[role=tablist] "),i=e.which||e.keyCode;if(n=t(this),/(37|38|39|40)/.test(i)){a=o.find("[role=tab]:visible"),r=a.index(a.filter(":focus")),(38==i||37==i)&&r--,(39==i||40==i)&&r++,0>r&&(r=a.length-1),r==a.length&&(r=0);var s=a.eq(r);"tab"===s.attr("role")&&s.tab("show").focus(),e.preventDefault(),e.stopPropagation()}},t(document).on("keydown.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',t.fn.tab.Constructor.prototype.keydown);var b=t.fn.tab.Constructor.prototype.activate;t.fn.tab.Constructor.prototype.activate=function(t,e,a){var r=e.find("> .active");r.find("[data-toggle=tab], [data-toggle=pill]").attr({tabIndex:"-1","aria-selected":!1}),r.filter(".tab-pane").attr({"aria-hidden":!0,tabIndex:"-1"}),b.apply(this,arguments),t.addClass("active"),t.find("[data-toggle=tab], [data-toggle=pill]").attr({tabIndex:"0","aria-selected":!0}),t.filter(".tab-pane").attr({"aria-hidden":!1,tabIndex:"0"})};var g=t('[data-toggle="collapse"]');g.each(function(a){var r=t(this),n=t(r.attr("data-target")?r.attr("data-target"):r.attr("href")),o=r.attr("data-parent"),i=o&&t(o),s=r.attr("id")||e("ui-collapse");r.attr("id",s),i&&(r.attr({role:"tab","aria-selected":"false","aria-expanded":"false"}),t(i).find("div:not(.collapse,.panel-body), h4").attr("role","presentation"),i.attr({role:"tablist","aria-multiselectable":"true"}),n.hasClass("in")?(r.attr({"aria-controls":n.attr("id"),"aria-selected":"true","aria-expanded":"true",tabindex:"0"}),n.attr({role:"tabpanel",tabindex:"0","aria-labelledby":s,"aria-hidden":"false"})):(r.attr({"aria-controls":n.attr("id"),tabindex:"-1"}),n.attr({role:"tabpanel",tabindex:"-1","aria-labelledby":s,"aria-hidden":"true"})))});var y=t.fn.collapse.Constructor.prototype.toggle;t.fn.collapse.Constructor.prototype.toggle=function(){var e,a=this.$parent&&this.$parent.find('[aria-expanded="true"]');if(a){var r,n=a.attr("data-target")||(e=a.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""),o=t(n),i=this.$element;this.$parent;this.$parent&&(r=this.$parent.find('[data-toggle=collapse][href="#'+this.$element.attr("id")+'"]')),y.apply(this,arguments),t.support.transition&&this.$element.one(t.support.transition.end,function(){a.attr({"aria-selected":"false","aria-expanded":"false",tabIndex:"-1"}),o.attr({"aria-hidden":"true",tabIndex:"-1"}),r.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:"0"}),i.hasClass("in")?i.attr({"aria-hidden":"false",tabIndex:"0"}):(r.attr({"aria-selected":"false","aria-expanded":"false"}),i.attr({"aria-hidden":"true",tabIndex:"-1"}))})}else y.apply(this,arguments)},t.fn.collapse.Constructor.prototype.keydown=function(e){var a,r,n=t(this),o=n.closest("div[role=tablist] "),i=e.which||e.keyCode;n=t(this),/(32|37|38|39|40)/.test(i)&&(32==i&&n.click(),a=o.find("[role=tab]"),r=a.index(a.filter(":focus")),(38==i||37==i)&&r--,(39==i||40==i)&&r++,0>r&&(r=a.length-1),r==a.length&&(r=0),a.eq(r).focus(),e.preventDefault(),e.stopPropagation())},t(document).on("keydown.collapse.data-api",'[data-toggle="collapse"]',t.fn.collapse.Constructor.prototype.keydown),t(".carousel").each(function(e){function a(){var e,a,r,o,i={};i.top=0,i.left=32e3,i.height=0,i.width=0;for(var s=0;s<f.length;s++){e=f[s],a=t(e).offset(),r=t(e).height(),o=t(e).width(),i.top<a.top&&(i.top=Math.round(a.top)),i.height<r&&(i.height=Math.round(r)),i.left>a.left&&(i.left=Math.round(a.left));var l=a.left-i.left+Math.round(o);i.width<l&&(i.width=l)}n.style.top=i.top-2+"px",n.style.left=i.left-2+"px",n.style.height=i.height+7+"px",n.style.width=i.width+8+"px"}var r,n,o,i,s,l,d=t(this),c=d.find('[data-slide="prev"]'),u=d.find('[data-slide="next"]'),p=d.find(".carousel-indicators"),f=d.find(".carousel-indicators li"),h=d.find(".item"),b=!1,g="id_title",y="id_desc";for(p.attr("role","tablist"),f.focus(function(){d.carousel("pause"),b=!0,o.innerHTML="Play Carousel",t(this).parent().addClass("active"),a(),t(n).addClass("focus"),t(this).parents(".carousel").addClass("contrast")}),f.blur(function(e){t(this).parent().removeClass("active"),t(n).removeClass("focus"),t(this).parents(".carousel").removeClass("contrast")}),l=0;l<h.length;l++)r=h[l],r.setAttribute("role","tabpanel"),r.setAttribute("id","tabpanel-"+e+"-"+l),r.setAttribute("aria-labelledby","tab-"+e+"-"+l);for("string"!=typeof d.attr("role")&&(d.attr("role","complementary"),d.attr("aria-labelledby",g),d.attr("aria-describedby",y),d.prepend('<p  id="'+y+'" class="sr-only">A carousel is a rotating set of images, rotation stops on keyboard focus on carousel tab controls or hovering the mouse pointer over images.  Use the tabs or the previous and next buttons to change the displayed slide.</p>'),d.prepend('<h2 id="'+g+'" class="sr-only">Carousel content with '+h.length+" slides.</h2>")),l=0;l<f.length;l++){s=f[l],s.setAttribute("role","tab"),s.setAttribute("id","tab-"+e+"-"+l),s.setAttribute("aria-controls","tabpanel-"+e+"-"+l);var v="#tabpanel-"+e+"-"+l,m=d.find(v).find("h1").text();("string"!=typeof m||0===m.length)&&(m=d.find(v).text()),("string"!=typeof m||0===m.length)&&(m=d.find(v).find("h3").text()),("string"!=typeof m||0===m.length)&&(m=d.find(v).find("h4").text()),("string"!=typeof m||0===m.length)&&(m=d.find(v).find("h5").text()),("string"!=typeof m||0===m.length)&&(m=d.find(v).find("h6").text()),("string"!=typeof m||0===m.length)&&(m="no title");var x=document.createElement("span");x.setAttribute("class","sr-only"),x.innerHTML="Slide "+(l+1),m&&(x.innerHTML+=": "+m),s.appendChild(x)}n=document.createElement("div"),n.className="carousel-tablist-highlight",document.body.appendChild(n),i=document.createElement("aside"),i.setAttribute("aria-label","carousel pause/play control"),t("#carouselplaypausebutton").prepend(i),o=document.createElement("button"),o.className="carousel-pause-button btn blue btn-sm",o.innerHTML="Pause Carousel",o.setAttribute("title","Pause/Play carousel animations"),t(i).append(o),t(o).click(function(){b?(o.innerHTML="Pause Carousel",d.carousel("cycle"),b=!1):(o.innerHTML="Play Carousel",d.carousel("pause"),b=!0)}),t(o).focus(function(){t(this).addClass("focus")}),t(o).blur(function(){t(this).removeClass("focus")}),a(),t(window).resize(function(){a()}),c.attr("aria-label","Previous Slide"),c.keydown(function(t){var e=t.which||t.keyCode;/(13|32)/.test(e)&&(t.preventDefault(),t.stopPropagation(),c.trigger("click"))}),c.focus(function(){t(this).parents(".carousel").addClass("contrast")}),c.blur(function(){t(this).parents(".carousel").removeClass("contrast")}),u.attr("aria-label","Next Slide"),u.keydown(function(t){var e=t.which||t.keyCode;/(13|32)/.test(e)&&(t.preventDefault(),t.stopPropagation(),u.trigger("click"))}),u.focus(function(){t(this).parents(".carousel").addClass("contrast")}),u.blur(function(){t(this).parents(".carousel").removeClass("contrast")}),t(".carousel-inner a").focus(function(){t(this).parents(".carousel").addClass("contrast")}),t(".carousel-inner a").blur(function(){t(this).parents(".carousel").removeClass("contrast")}),f.each(function(){var e=t(this);e.hasClass("active")?e.attr({"aria-selected":"true",tabindex:"0"}):e.attr({"aria-selected":"false",tabindex:"-1"})})});var v=t.fn.carousel.Constructor.prototype.slide;t.fn.carousel.Constructor.prototype.slide=function(t,e){var a,r=this.$element,n=r.find("[role=tabpanel].active"),o=e||n[t](),i=r.find("[role=tabpanel]").size(),s=r.find('[data-slide="prev"]'),l=r.find('[data-slide="next"]'),d=0,c=i-1,u=1;o&&o.attr("id")&&(a=o.attr("id"),d=a.lastIndexOf("-"),d>=0&&(d=parseInt(a.substring(d+1),10)),c=d-1,1>c&&(c=i-1),u=d+1,u>=i&&(u=0)),s.attr("aria-label","Show slide "+(c+1)+" of "+i),l.attr("aria-label","Show slide "+(u+1)+" of "+i),v.apply(this,arguments),n.one("bsTransitionEnd",function(){var t;t=r.find('li[aria-controls="'+n.attr("id")+'"]'),t&&t.attr({"aria-selected":!1,tabIndex:"-1"}),t=r.find('li[aria-controls="'+o.attr("id")+'"]'),t&&t.attr({"aria-selected":!0,tabIndex:"0"})})};var m;t.fn.carousel.Constructor.prototype.keydown=function(e){function a(t){t>=o.length||0>t||(n.carousel(t),setTimeout(function(){o[t].focus()},150))}m=m||t(this),this instanceof Node&&(m=t(this));var r,n=t(e.target).closest(".carousel"),o=n.find("[role=tab]"),i=e.which||e.keyCode;/(37|38|39|40)/.test(i)&&(r=o.index(o.filter(".active")),(37==i||38==i)&&(r--,a(r)),(39==i||40==i)&&(r++,a(r)),e.preventDefault(),e.stopPropagation())},t(document).on("keydown.carousel.data-api","li[role=tab]",t.fn.carousel.Constructor.prototype.keydown)}(jQuery);